<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <script>
    (function() {
      const lockOrientation = () => {
        if (screen.orientation && screen.orientation.lock) {
          screen.orientation.lock('portrait').catch(() => {});
        }
      };
      if ('ontouchstart' in window) {
        lockOrientation();
        window.addEventListener('orientationchange', lockOrientation);
      }
    })();
  </script>

  <title>Iniciar Sesión</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            oscuro: '#231F20',
            celeste: '#23b4e9'
          },
          fontFamily: {
            sans: ['Kanit', 'sans-serif']
          }
        }
      }
    }
  </script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
</head>

<body class="bg-oscuro min-h-screen text-white flex flex-col justify-center items-center gap-6 px-6 text-center font-sans">

  <!-- Logo -->
  <img src="https://zgjaxanqfkweslkxtayt.supabase.co/storage/v1/object/public/imagenesapp/enpr/Logo_fondo%20oscuro.png" alt="Logo" class="w-48 mt-12 mb-8">

  <!-- Botón para mostrar login -->
  <button id="btnMostrarLogin" class="bg-celeste text-white font-medium py-3 px-6 rounded-lg text-lg w-full max-w-xs">Entrar a mi Cuenta</button>

  <!-- Botón Google (solo visible cuando se muestra registro) -->
  <button type="button" id="btnGoogleTop" data-login-provider="google" class="hidden bg-white text-black font-medium py-3 px-6 rounded-lg text-lg w-full max-w-xs flex items-center justify-center gap-2 border border-gray-300">
    <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google" class="w-5 h-5" />
    Entrar con Google
  </button>

  <!-- Formulario de Login -->
  <form id="formLogin" class="hidden w-full max-w-xs text-left">
    <label class="block text-white text-sm mb-1">Email</label>
    <input type="email" id="emailLogin" class="w-full px-3 py-2 rounded bg-white text-black mb-3" required />

    <label class="block text-white text-sm mb-1">Contraseña</label>
    <div class="relative">
      <input type="password" id="passwordLogin" class="w-full px-3 py-2 pr-10 rounded bg-white text-black mb-3" required />
      <i id="togglePasswordLogin" class="fas fa-eye-slash absolute top-3 right-3 cursor-pointer text-gray-500"></i>
    </div>

    <button type="submit" class="w-full bg-celeste text-white text-lg font-medium py-2 rounded mt-2">Iniciar Sesión</button>
    <p id="errorMensaje" class="text-red-500 mt-2 text-sm hidden"></p>

    <div class="mt-6 mb-4">
      <button type="button" data-login-provider="google" class="w-full flex items-center justify-center gap-2 border border-gray-300 bg-white text-black py-2 rounded font-medium">
        <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google" class="w-5 h-5" />
        Entrar con Google
      </button>
    </div>

    <p class="text-sm text-white text-center">
      ¿No tienes cuenta?
      <button type="button" id="linkMostrarRegistro" class="underline text-celeste">Regístrate</button>
    </p>
  </form>

  <div id="linksRecuperacion" class="hidden w-full max-w-xs text-sm text-center space-y-2">
    <a href="./recuperarPassword.html" class="text-white underline block">¿Olvidaste tu contraseña?</a>
  </div>

  <!-- Botón para mostrar registro -->
  <button id="btnMostrarRegistro" class="bg-white text-celeste font-medium py-3 px-6 rounded-lg text-lg w-full max-w-xs">Crear Cuenta</button>

  <!-- Formulario de Registro -->
  <form id="formRegistro" class="hidden w-full max-w-xs text-left" enctype="multipart/form-data">
    <div class="flex flex-col items-center mb-6">
      <div id="avatarPreview" class="relative flex items-center justify-center rounded-full border border-white cursor-pointer overflow-hidden" style="width: 150px; height: 150px;">
        <span id="avatarPlaceholder" class="text-5xl text-white">+</span>
        <img id="previewFoto" class="hidden w-full h-full object-cover" alt="Preview foto" />
      </div>
      <p id="avatarText" class="text-white text-sm font-light mt-2 cursor-pointer">Añadir imagen</p>
      <input type="file" id="fotoRegistro" accept="image/*" class="hidden" />
    </div>

    <label class="block text-white text-sm mb-1">Nombre</label>
    <input type="text" id="nombreRegistro" class="w-full px-3 py-2 rounded bg-white text-black mb-3" required />

    <label class="block text-white text-sm mb-1">Apellido</label>
    <input type="text" id="apellidoRegistro" class="w-full px-3 py-2 rounded bg-white text-black mb-3" required />

    <label class="block text-white text-sm mb-1">Email</label>
    <input type="email" id="emailRegistro" class="w-full px-3 py-2 rounded bg-white text-black mb-3" required />

    <label class="block text-white text-sm mb-1">Teléfono</label>
    <input type="tel" id="telefonoRegistro" class="w-full px-3 py-2 rounded bg-white text-black mb-1" placeholder="(787) 123-4567" required />
    <p class="text-xs text-gray-300 italic mb-3">Formato requerido: 10 dígitos</p>

    <label class="flex items-start gap-2 text-white text-sm mb-3">
      <input type="checkbox" id="consentimientoSms" class="mt-1" checked />
      <span>Recibir notificaciones por texto de ofertas exclusivas de En Pe Erre y de tus comercios favoritos.</span>
    </label>

    <label class="block text-white text-sm mb-1">Municipio (opcional)</label>
    <select id="municipio" class="w-full px-3 py-2 rounded bg-white text-black mb-3">
      <option value="">Selecciona un municipio</option>
      <option value="1">Adjuntas</option>
      <option value="2">Aguada</option>
      <option value="3">Aguadilla</option>
      <option value="4">Aguas Buenas</option>
      <option value="5">Aibonito</option>
      <option value="6">Añasco</option>
      <option value="7">Arecibo</option>
      <option value="8">Arroyo</option>
      <option value="9">Barceloneta</option>
      <option value="10">Barranquitas</option>
      <option value="11">Bayamón</option>
      <option value="12">Cabo Rojo</option>
      <option value="13">Caguas</option>
      <option value="14">Camuy</option>
      <option value="15">Canóvanas</option>
      <option value="16">Carolina</option>
      <option value="17">Cataño</option>
      <option value="18">Cayey</option>
      <option value="19">Ceiba</option>
      <option value="20">Ciales</option>
      <option value="21">Cidra</option>
      <option value="22">Coamo</option>
      <option value="23">Comerío</option>
      <option value="24">Corozal</option>
      <option value="25">Culebra</option>
      <option value="26">Dorado</option>
      <option value="27">Fajardo</option>
      <option value="28">Florida</option>
      <option value="29">Guánica</option>
      <option value="30">Guayama</option>
      <option value="31">Guayanilla</option>
      <option value="32">Guaynabo</option>
      <option value="33">Gurabo</option>
      <option value="34">Hatillo</option>
      <option value="35">Hormigueros</option>
      <option value="36">Humacao</option>
      <option value="37">Isabela</option>
      <option value="38">Jayuya</option>
      <option value="39">Juana Díaz</option>
      <option value="40">Juncos</option>
      <option value="41">Lajas</option>
      <option value="42">Lares</option>
      <option value="43">Las Marías</option>
      <option value="44">Las Piedras</option>
      <option value="45">Loíza</option>
      <option value="46">Luquillo</option>
      <option value="47">Manatí</option>
      <option value="48">Maricao</option>
      <option value="49">Maunabo</option>
      <option value="50">Mayagüez</option>
      <option value="51">Moca</option>
      <option value="52">Morovis</option>
      <option value="53">Naguabo</option>
      <option value="54">Naranjito</option>
      <option value="55">Orocovis</option>
      <option value="56">Patillas</option>
      <option value="57">Peñuelas</option>
      <option value="58">Ponce</option>
      <option value="59">Quebradillas</option>
      <option value="60">Rincón</option>
      <option value="61">Río Grande</option>
      <option value="62">Sabana Grande</option>
      <option value="63">Salinas</option>
      <option value="64">San Germán</option>
      <option value="65">San Juan</option>
      <option value="66">San Lorenzo</option>
      <option value="67">San Sebastián</option>
      <option value="68">Santa Isabel</option>
      <option value="69">Toa Alta</option>
      <option value="70">Toa Baja</option>
      <option value="71">Trujillo Alto</option>
      <option value="72">Utuado</option>
      <option value="73">Vega Alta</option>
      <option value="74">Vega Baja</option>
      <option value="75">Vieques</option>
      <option value="76">Villalba</option>
      <option value="77">Yabucoa</option>
      <option value="78">Yauco</option>
    </select>

<!-- Contraseña -->
<label class="block text-white text-sm mb-1">Contraseña</label>
<div class="relative">
  <input type="password" id="passwordRegistro" class="w-full px-3 py-2 pr-10 rounded bg-white text-black border border-transparent mb-1" required />
  <i id="togglePasswordRegistro" class="fas fa-eye-slash absolute top-3 right-3 cursor-pointer text-gray-500"></i>
</div>
<p id="passwordRegistroMensaje" class="text-xs text-red-400 mb-3 hidden">La contraseña debe tener al menos 6 caracteres.</p>

<!-- Confirmar contraseña -->
<label class="block text-white text-sm mb-1">Confirmar Contraseña</label>
<div class="relative">
  <input type="password" id="confirmarPassword" class="w-full px-3 py-2 pr-10 rounded bg-white text-black mb-3" required />
  <i id="toggleConfirmarPassword" class="fas fa-eye-slash absolute top-3 right-3 cursor-pointer text-gray-500"></i>
</div>

    <button type="submit" class="w-full bg-celeste text-white text-lg font-medium py-2 rounded">Registrarme</button>
    <p id="errorRegistro" class="text-red-500 mt-2 text-sm hidden"></p>

    <div class="mt-8 mb-4">
      <button type="button" data-login-provider="google" class="w-full flex items-center justify-center gap-2 border border-gray-300 bg-white text-black py-2 rounded font-medium">
        <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google" class="w-5 h-5" />
        Entrar con Google
      </button>
    </div>

    <p class="text-sm text-white text-center">
      ¿Ya tienes cuenta?
      <button type="button" id="linkMostrarLogin" class="underline text-celeste">Inicia sesión</button>
    </p>
  </form>

  <!-- Continuar sin cuenta -->
  <a href="javascript:history.back()" class="text-sm underline text-white mt-2 mb-10">
  Continuar sin Cuenta
</a>

  <!-- Scripts -->
  <script type="module" src="./js/logearse.js"></script>

</body>
</html>
